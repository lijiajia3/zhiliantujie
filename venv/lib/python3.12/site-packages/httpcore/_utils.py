from __future__ import annotations

import select
import socket
import sys


def is_socket_readable(sock: socket.socket | None) -> bool:
    
    
    

    
    
    
    sock_fd = None if sock is None else sock.fileno()
    if sock_fd is None or sock_fd < 0:  
        return True

    
    
    

    
    
    if (
        sys.platform == "win32" or getattr(select, "poll", None) is None
    ):  
        rready, _, _ = select.select([sock_fd], [], [], 0)
        return bool(rready)
    p = select.poll()
    p.register(sock_fd, select.POLLIN)
    return bool(p.poll(0))
