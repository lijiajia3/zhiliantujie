
import re

import numpy as np
from numpy.testing import assert_


def test_valid_numpy_version():
    
    
    version_pattern = r"^[0-9]+\.[0-9]+\.[0-9]+(a[0-9]|b[0-9]|rc[0-9])?"
    dev_suffix = r"(\.dev[0-9]+(\+git[0-9]+\.[0-9a-f]+)?)?"
    res = re.match(version_pattern + dev_suffix + '$', np.__version__)

    assert_(res is not None, np.__version__)


def test_short_version():
    
    if np.version.release:
        assert_(np.__version__ == np.version.short_version,
                "short_version mismatch in release version")
    else:
        assert_(np.__version__.split("+")[0] == np.version.short_version,
                "short_version mismatch in development version")


def test_version_module():
    contents = set([s for s in dir(np.version) if not s.startswith('_')])
    expected = set([
        'full_version',
        'git_revision',
        'release',
        'short_version',
        'version',
    ])

    assert contents == expected
